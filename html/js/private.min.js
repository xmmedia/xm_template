//@codekit-append "jquery.outside.min.js";
//@codekit-append "../cl4/js/cl4.js";
//@codekit-append "../cl4/js/ajax.js";
//@codekit-append "base.js";
/* **********************************************
     Begin jquery.outside.min.js
********************************************** *//*
 * jQuery outside events - v1.1 - 3/16/2010
 * http://benalman.com/projects/jquery-outside-events-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */(function(e,t,n){function r(r,i){function u(t){e(s).each(function(){var n=e(this);this!==t.target&&!n.has(t.target).length&&n.triggerHandler(i,[t.target])})}i=i||r+n;var s=e(),o=r+"."+i+"-special-event";e.event.special[i]={setup:function(){s=s.add(this);s.length===1&&e(t).bind(o,u)},teardown:function(){s=s.not(this);s.length===0&&e(t).unbind(o)},add:function(e){var t=e.handler;e.handler=function(e,n){e.target=n;t.apply(this,arguments)}}}}e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(e){r(e)});r("focusin","focus"+n);r("focusout","blur"+n);e.addOutsideEvent=r})(jQuery,document,"outside");var cl4={};cl4.multiple_edit_count=0;cl4.button_link_form=function(){var e=$(this).data("cl4_form_action"),t,n;if(e){t=$(this.form);t.attr("action",e);n=$(this).data("cl4_form_target");n?t.attr("target",n):t.attr("target","")}};cl4.button_link=function(){var e=$(this).data("cl4_link");e&&(window.location=e)};cl4.multiple_edit=function(){};cl4.export_selected=function(){};cl4.add_multiple_form=function(){var e=$(this),t=$("#"+e.data("cl4_add_multiple_related_button")),n=t.data("cl4_add_multiple_form_action_prefix");t.data("cl4_form_action",n+"/"+e.val())};cl4.multiple_edit_form=function(){$(".js_cl4_multiple_edit_form_checkbox:checked").length>0?$(".js_cl4_multiple_edit, .js_cl4_export_selected").removeAttr("disabled"):$(".js_cl4_multiple_edit, .js_cl4_export_selected").attr("disabled","disabled")};cl4.check_all_checkbox=function(){var e=$(this);e.filter(":checked").length>0?$("."+e.data("cl4_check_all_checkbox_class")).attr("checked","checked").change():$("."+e.data("cl4_check_all_checkbox_class")).removeAttr("checked").change()};cl4.row_checked=function(){$(this).attr("checked")?$(this).parents("tr").addClass("selected"):$(this).parents("tr").removeClass("selected")};cl4.model_select_change=function(){window.location="/dbadmin/"+$("#cl4_model_select").val()+"/index"};typeof $.datepicker!="undefined"&&$.datepicker.setDefaults({dateFormat:"yy-mm-dd",buttonImage:"/cl4/images/calendar.gif",buttonImageOnly:!0});$(function(){typeof $.datepicker!="undefined"&&$(".js_cl4_date_field-date").datepicker();$(".js_cl4_button_link_form").on("click",cl4.button_link_form);$(".js_cl4_button_link").on("click",cl4.button_link);$(".js_cl4_multiple_edit").on("click",cl4.multiple_edit);$(".js_cl4_export_selected").on("click",cl4.export_selected);$(".js_cl4_multiple_edit_form").on("change",cl4.multiple_edit_form);$(".js_cl4_check_all_checkbox").on("click",cl4.check_all_checkbox);$(".cl4_add_multiple_count").on("change",cl4.add_multiple_form);$(".js_cl4_row_checkbox").on("change",cl4.row_checked);$(".js_cl4_model_select_form").on("change",cl4.model_select_change);$(".js_cl4_model_select_go").on("click",cl4.model_select_change)});cl4.ajax_error_msgs={default_msg:"There was a error loading some of the content on this page.<br>Try reloading the page or contacting an administrator.",not_logged_in:'You are no longer logged in. <a href="/login">Click here to login.</a>',timed_out:'Your login has timed out. To continue using your current login, <a href="/login/timedout">click here to enter your password.</a>',not_allowed:"You do not have the necessary permissions to access some of the functionality on this page.",not_found_404:"The requested URL was not found."};cl4.add_ajax_error=function(e){cl4.add_message_div(e)};cl4.add_ajax_validation_msg=function(e){cl4.hide_ajax_validation_msgs();e!==null&&typeof e=="object"&&typeof e.validation_msg!="undefined"&&e.validation_msg!==""&&cl4.add_message_div(e.validation_msg,"cl4_ajax_validation_msg")};cl4.add_message_div=function(e,t){arguments.length==2?t=' class="'+t+'"':t="";var n=$("<div"+t+'><span class="dismiss"><a href="">X</a></span>'+e+"</div>");$("#cl4_ajax_errors").append(n);n.slideDown(cl4.animate_ajax_body_margin).find("span.dismiss a").click(function(e){e.preventDefault();$(this).parent().parent().slideUp(function(){$(this).remove();cl4.animate_ajax_body_margin()})})};cl4.hide_ajax_validation_msgs=function(){$("#cl4_ajax_errors div.cl4_ajax_validation_msg").slideUp(function(){$(this).remove()})};cl4.animate_ajax_body_margin=function(){$("body").animate({marginTop:$("#cl4_ajax_errors").height()+"px"},"fast","linear")};cl4.add_default_ajax_error=function(e,t){if(arguments.length===0){e=null;t=cl4.ajax_error_msgs.default_msg}else arguments.length==1&&(t=cl4.ajax_error_msgs.default_msg);e!==null&&typeof e=="object"&&typeof e.error_msg!="undefined"&&e.error_msg!==""?cl4.add_ajax_error(e.error_msg):cl4.add_ajax_error(t)};$("#cl4_ajax_errors").ajaxError(function(e,t,n,r){if(typeof n.cl4_ajax_error_display=="undefined"||n.cl4_ajax_error_display){cl4.add_ajax_error(cl4.ajax_error_msgs.default_msg);cl4_in_debug&&cl4.ajax_log_msg("AJAX Error: "+r)}});cl4.process_ajax=function(e){if(typeof e!="object"||jQuery.isEmptyObject(e)){cl4.add_default_ajax_error();cl4_in_debug&&cl4.ajax_log_msg("JSON data is not parsable");return!1}cl4_in_debug&&typeof e.debug_msg!="undefined"&&e.debug_msg!==""&&cl4.add_ajax_error(e.debug_msg);if(typeof e.status=="undefined"){cl4_in_debug&&cl4.ajax_log_msg("No status property in JSON data");return}switch(e.status){case 1:cl4_in_debug&&cl4.ajax_log_msg("AJAX all good");return!0;case 2:cl4.add_default_ajax_error(e,cl4.ajax_error_msgs.not_logged_in);cl4_in_debug&&cl4.ajax_log_msg("The user is not logged in");return!1;case 3:cl4.add_default_ajax_error(e,cl4.ajax_error_msgs.timed_out);cl4_in_debug&&cl4.ajax_log_msg("The user has timed out");return!1;case 4:cl4.add_default_ajax_error(e,cl4.ajax_error_msgs.not_allowed);cl4_in_debug&&cl4.ajax_log_msg("The user does not have permissions");return!1;case 5:cl4.add_default_ajax_error(e,cl4.ajax_error_msgs.not_found_404);cl4_in_debug&&cl4.ajax_log_msg("The page/path could not be found");return!1;case 6:cl4.add_ajax_validation_msg(e);cl4_in_debug&&cl4.ajax_log_msg("There was a validation error");return!1;case 0:default:cl4.add_default_ajax_error(e);cl4_in_debug&&(typeof e.debug_msg!="undefined"&&e.debug_msg!==""?cl4.ajax_log_msg("AJAX Error: "+e.debug_msg):cl4.ajax_log_msg("An unknown error occurred"));return!1}};cl4.ajax_log_msg=function(e){try{console.log(e)}catch(t){}};(function(e){e.fn.numeric=function(){this.keypress(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0;return e.ctrlKey||e.altKey||t>=48&&t<=57||t==9||t==39||t==37||t==35||t==36||t==8||t==46||t==13||t==45||t==43?!0:!1})};e.fn.autofocus=function(){return Modernizr.input.autofocus?this:this.focus()};e.fn.check=function(){return this.each(function(){this.checked=!0})};e.fn.uncheck=function(){return this.each(function(){this.checked=!1})};e.fn.check_toggle=function(){return this.each(function(){this.checked=this.checked?!1:!0})};e.fn.checked=function(){return this.length>1?this.get(0).is(":checked"):this.length==1?this.is(":checked"):!1}})(jQuery);typeof $.datepicker!="undefined"&&$.datepicker.setDefaults({showOn:"both",buttonText:"Click view calendar to pick date",showButtonPanel:!0,changeMonth:!0,changeYear:!0,constrainInput:!1,duration:"fast",yearRange:"c-5:c+5",appendText:"(YYYY-MM-DD)",onClose:function(e,t){this.focus()}});$.ajaxSetup({cache:!1});$(function(){$("[autofocus]").autofocus();$(".numeric").numeric();$(".top_nav_wrapper").on("click","li.has_subnav > a",function(e){e.preventDefault();e.stopPropagation();var t=$(this),n=t.parent().find(".sub_nav"),r,i;if(n.css("visibility")!=="hidden"){n.css({visibility:"hidden"});t.removeClass("clicked")}else{$(".top_nav_wrapper li.has_subnav > a.clicked").click();r=t.offset();i=t.width();n.hasClass("right")?n.css({right:$(window).width()-(r.left+i+39),top:t.parent().innerHeight(),visibility:"visible"}):n.css({left:r.left-5,top:t.parent().innerHeight(),visibility:"visible"});n.width()<i+19&&n.css("width",i+19+"px");t.addClass("clicked");n.bind("clickoutside",function(){$(".top_nav_wrapper li.has_subnav > a.clicked").click()})}})});